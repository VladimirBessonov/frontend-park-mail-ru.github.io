<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <button id="btn">leak</button>
	<button id="noLeak">no leak</button>


    <script>
        var btn = document.getElementById('btn');
        var a = null;

        btn.addEventListener('click', function () {
            var b = a;

            a = {
                longStr: new Array(1000000).join(Math.random().toString()),  // создаем 1Mб объект
                someMethod: function () {
                    var unused = function() {
                        console.log(b);
                    };
                    console.log("Hi, JS-dude!");
                }
            };

        });

		var noLeak = document.getElementById('noLeak');
        var c = null;

        noLeak.addEventListener('click', function () {
            var b = c;

            a = {
                longStr: new Array(1000000).join(Math.random().toString()),  // создаем 1Mб объект
                someMethod: function () {
                    console.log("Hi, JS-dude!");
                }
            };

        });

    </script>

</body>
</html>
